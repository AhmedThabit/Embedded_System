

#include <avr/io.h>
#define F_CPU 1000000

/*--------------------------------------------------------------------------------------------------
                                     Character generator

             This table defines the  characters in a dot format.
--------------------------------------------------------------------------------------------------*/
char gCharacter[][8]=
  {
    {0xff,0xff,0xc3,0xc3,0xc3,0xc3,0xff,0xff},   // 0
    {0x1c,0x3c,0x6c,0xcc,0x8c,0x0c,0x0c,0x3f},   // 1
    {0x3e,0x46,0xc6,0xcc,0xd8,0x30,0x7f,0x7f},   // 2
    {0xff,0xff,0x03,0xff,0xff,0x03,0xff,0xff},   // 3     {0x3b,0x33,0x63,0xc3,0xff,0xff,0x03,0x03},   // 4
    {0xff,0xff,0xc0,0xff,0xff,0x03,0xff,0xff},   // 5
    {0xff,0xff,0xc0,0xff,0xff,0xc3,0xff,0xff},   // 6
    {0xff,0xff,0x03,0x06,0x7f,0x7f,0x30,0x60},   // 7
    {0xff,0xff,0xc3,0xff,0xff,0xc3,0xff,0xff},   // 8
    {0xff,0xff,0xc3,0xff,0xff,0x03,0xff,0xff},   // 9
    {0x00,0x18,0x18,0x00,0x00,0x18,0x18,0x00},   // :
    {0x00,0x18,0x18,0x00,0x18,0x18,0x10,0x00},   // ;
    {0x18,0x30,0x60,0xc0,0xc0,0x60,0x30,0x18},   // <
    {0x00,0x7E,0x7E,0x00,0x00,0x7E,0x7E,0x00},   // =
    {0x18,0x0C,0x06,0x03,0x03,0x06,0x0C,0x18},   // >
    {0x1C,0x3E,0x36,0x06,0x0C,0x0c,0x00,0x0C},   // ?
    {},   // @
    {0b00111100,0b01111110,0b11000011,0b11000011,0b11111111,0b11111111,0b11000011,0b11000011},   // A
    {0xFC,0xC3,0xC3,0xFC,0xC3,0xC3,0xC3,0xFC},   // B
    {0x3e,0x7e,0xe0,0xc0,0xc0,0xe0,0x7e,0x3e},   // C
    {0xfc,0xfc,0xc6,0xc7,0xc7,0xc6,0xfc,0xfc},   // D
    {},   // E
    {},   // F
    {},   // G
    {},   // H
    {},   // I
    {},   // J
    {},   // K
    {},   // L
    {},   // M
    {},   // N
    {},   // O
    {0xFF,0x81,0x81,0xFF,0x80,0x80,0x80,0x80},   // P
    {0xFF,0x81,0x81,0x81,0x81,0xFF,0x02,0x01},   // Q
    {0xFF,0x82,0x82,0xFF,0x88,0x84,0x82,0x82},   // R
    {0x0F,0x08,0x08,0x0F,0x01,0x01,0x0F,0x00},   // S
    {0xFE,0x10,0x10,0x10,0x10,0x10,0x10,0x10},   // T
    {},   // U
    {},   // V
    {},   // W
    {},   // X
    {},   // Y
    {},   // Z
    {},   // [
    {},   // ]
    {},   // ^
    {},   // _
    {},   // '   
    {},   // a
    {},   // b
    {},   // c
    {},   // d
    {},   // e
    {},   // f
    {},   // g
    {},   // h
    {},   // i
    {},   // j
    {},   // k
    {},   // l
    {},   // m
    {},   // n
    {},   // o
    {},   // p
    {},   // q
    {},   // r
    {},   // s
    {},   // t
    {},   // u
    {},   // v
    {},   // w
    {},   // x
    {},   // y
    {}    // z
};

// Functions' Prototypes
void delay_us (unsigned long time);
void Display_Frame0(char ch);
void Display_Frame1(char ch);

int main(void){
	
    char ch1 = '0';
	char ch2 = '1';
    //int Frame_selection=0;
	//port initialization
	DDRA = 0xFF;
	DDRB = 0xFF;
	DDRC = 0xFF;
	DDRD = 0xFF;
	
    while(1){
		Display_Frame0(ch1);
		Display_Frame1(ch2);
    }
}

// Functions' Definition 

void delay_us (unsigned long time){
	while(time>0){
		volatile int i = 13333;
		while (i>0){
			i--;
		}
		time --;
	}
}

void Display_Frame0(char ch){
	
	static int Row = 0; //Frame Column
	int index = ch - 48; //index to choose the character from global array gCharacter
	char Col = gCharacter[index][Row]; //Frame Row
	PORTA = 1<<Row;
	PORTB = ~Col;
	if (Row == 7) Row=0;
	else Row++;
}


void Display_Frame1(char ch){
	
	static int Row = 0; //Frame Column
	int index = ch - 48; //index to choose the character from global array gCharacter
	char Col = gCharacter[index][Row]; //Frame Row
	PORTC = 1<<Row;
	PORTD = ~Col;
	if (Row == 7) Row=0;
	else Row++;
}